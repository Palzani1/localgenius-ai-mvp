import{Fragment as e,computed as t,createBaseVNode as n,createBlock as r,createCommentVNode as i,createElementBlock as a,createTextVNode as o,createVNode as s,defineComponent as c,handler as l,onBeforeMount as u,onMounted as d,openBlock as f,reactive as p,ref as m,resolveComponent as h,toDisplayString as g,unref as _,watch as v,withCtx as y}from"./vscode-ByQLBi_r.js";import{ElForm as b,ElFormItem as x,withKeys as S}from"./focus-trap-CSSWZImT.js";import{defineStore as C}from"./pinia-BVG5H93L.js";import{$t as w,ElInput as T,confirmEl as E,notify as D,success as O}from"./notify-DqF5XRqJ.js";import{__plugin_vue_export_helper_default as k}from"./_plugin-vue_export-helper-C32SG5g-.js";import"./tooltip-CVpAU6Sv.js";import"./isEqual-CdOvZtUE.js";import"./isArrayLikeObject-05TlFTR_.js";import"./merge-DTOcvLG1.js";import"./_baseIteratee-CSRzNRlS.js";import{ElTable as A,ElTableColumn as j}from"./table-RpKCEj1I.js";import"./isUndefined-Cqoojwy1.js";import{ElDialog as M}from"./dialog-BEu6-a3T.js";import"./click-outside-auYYsqs3.js";import"./checkbox-BaDld0em.js";import{ElRadioButton as N,ElRadioGroup as P}from"./radio-Ce_tQ3f6.js";const F=C(`forward`,{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});let I=function(e){return e[e.Stop=0]=`Stop`,e[e.Running=1]=`Running`,e[e.AlreadyUsed=2]=`AlreadyUsed`,e}({});const L={class:`mb-2 ml-20`},R={class:`flex flex-row items-center w-72`},z={class:`forward-arrow`},B={key:0,class:`el-icon-bottom`},V={key:1,class:`el-icon-top`},H={class:`flex flex-row items-center w-72`},U={class:`flex flex-row`};var W=c({__name:`ForwardDialog`,emits:[`save`],setup(c,{emit:d}){let m=p({host:null}),C=d,E=F(),D=t(()=>E.panel),O=t(()=>D.value.edit.type==`Dynamic`?`1080`:`port`),k=t(()=>{switch(D.value.edit.type){case`Local`:return w(`ssh.portForward.local`);case`Remote`:return w(`ssh.portForward.remote`)}return w(`ssh.portForward.dynamic`)});v(()=>D.value.edit.type,e=>{D.value.edit.id||(D.value.edit.remoteHost=e==`Remote`?m.host:`127.0.0.1`)}),u(()=>{l.on(`config`,e=>{Object.assign(m,e)})});let A=()=>{C(`save`,D.value.edit),D.value.loading=!0};return(t,c)=>{let l=h(`RedMark`),u=N,d=P,p=x,m=T,v=h(`vsc-switch`),C=b,E=h(`vsc-button`),j=M;return f(),r(j,{ref:`editDialog`,modelValue:D.value.visible,"onUpdate:modelValue":c[11]||=e=>D.value.visible=e,"show-close":!1,title:`Port Fowarding`,width:`550px`,top:`3vh`,closeOnClickModal:!1},{footer:y(()=>[s(E,{type:`secondary`,onClick:c[10]||=e=>D.value.visible=!1},{default:y(()=>[o(g(_(w)(`common.cancel`)),1)]),_:1}),s(E,{loading:D.value.loading,onClick:A},{default:y(()=>c[20]||=[o(`Save`)]),_:1},8,[`loading`])]),default:y(()=>[s(C,{ref:`infoForm`,model:D.value.edit,"label-width":`120px`},{default:y(()=>[n(`div`,L,g(k.value),1),s(p,null,{label:y(()=>[s(l),c[12]||=o(`Type `)]),default:y(()=>[s(d,{modelValue:D.value.edit.type,"onUpdate:modelValue":c[3]||=e=>D.value.edit.type=e,type:`relax`},{default:y(()=>[s(u,{modelValue:D.value.edit.type,"onUpdate:modelValue":c[0]||=e=>D.value.edit.type=e,value:`Local`},{default:y(()=>c[13]||=[o(`Local`)]),_:1},8,[`modelValue`]),s(u,{modelValue:D.value.edit.type,"onUpdate:modelValue":c[1]||=e=>D.value.edit.type=e,value:`Remote`},{default:y(()=>c[14]||=[o(`Remote`)]),_:1},8,[`modelValue`]),s(u,{modelValue:D.value.edit.type,"onUpdate:modelValue":c[2]||=e=>D.value.edit.type=e,value:`Dynamic`},{default:y(()=>c[15]||=[o(` Dynamic(Socks Proxy) `)]),_:1},8,[`modelValue`])]),_:1},8,[`modelValue`])]),_:1}),s(p,null,{label:y(()=>[s(l),c[16]||=o(`Local `)]),default:y(()=>[n(`div`,R,[s(m,{modelValue:D.value.edit.localHost,"onUpdate:modelValue":c[4]||=e=>D.value.edit.localHost=e,class:`basis-72`},null,8,[`modelValue`]),c[17]||=n(`span`,{class:`basis-14 text-center text-base`},`:`,-1),s(m,{modelValue:D.value.edit.localPort,"onUpdate:modelValue":c[5]||=e=>D.value.edit.localPort=e,placeholder:O.value,class:`basis-32`},null,8,[`modelValue`,`placeholder`])])]),_:1}),D.value.edit.type==`Dynamic`?i(``,!0):(f(),a(e,{key:0},[n(`div`,z,[D.value.edit.type==`Remote`?(f(),a(`i`,B)):(f(),a(`i`,V))]),s(p,null,{label:y(()=>[s(l),c[18]||=o(`Remote `)]),default:y(()=>[n(`div`,H,[s(m,{modelValue:D.value.edit.remoteHost,"onUpdate:modelValue":c[6]||=e=>D.value.edit.remoteHost=e,class:`basis-72`},null,8,[`modelValue`]),c[19]||=n(`span`,{class:`basis-14 text-center text-base`},`:`,-1),s(m,{modelValue:D.value.edit.remotePort,"onUpdate:modelValue":c[7]||=e=>D.value.edit.remotePort=e,placeholder:`port`,class:`basis-32`,onKeyup:S(A,[`enter`])},null,8,[`modelValue`])])]),_:1})],64)),n(`div`,U,[s(p,{label:`Name`,class:`w-64`},{default:y(()=>[s(m,{modelValue:D.value.edit.name,"onUpdate:modelValue":c[8]||=e=>D.value.edit.name=e},null,8,[`modelValue`])]),_:1}),s(p,{class:`auto-start-form-item`,label:`Auto Start`,title:`Auto start with VS Code startup`},{default:y(()=>[s(v,{modelValue:D.value.edit.autoStartUp,"onUpdate:modelValue":c[9]||=e=>D.value.edit.autoStartUp=e,class:`ml-2`},null,8,[`modelValue`])]),_:1})])]),_:1},8,[`model`])]),_:1},8,[`modelValue`])}}}),G=k(W,[[`__scopeId`,`data-v-78656478`]]);const K={class:`flex justify-start items-center mb-4`},q={class:`space-x-2`};var J=c({__name:`ForwardServerTable`,props:{serverList:Array},emits:[`selectServer`,`importConfig`,`exportConfig`],setup(e,{emit:t}){let r=t,i=()=>{l.emit(`importConfig`,{type:`merge`})},c=()=>{l.emit(`exportConfig`)};return(t,u)=>{let d=h(`vsc-button`),p=j,m=A;return f(),a(`div`,null,[n(`div`,K,[u[3]||=n(`h2`,{class:`text-xl font-semibold mr-4`},`Server Port Forwarding`,-1),n(`div`,q,[s(d,{type:`primary`,size:`micro`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},icon:`codicon-refresh`,onClick:u[0]||=e=>_(l).emit(`load`)}),s(d,{type:`primary`,size:`micro`,icon:`codicon-arrow-down`,onClick:c},{default:y(()=>u[1]||=[o(`Export`)]),_:1}),s(d,{type:`primary`,size:`micro`,icon:`codicon-arrow-up`,onClick:i},{default:y(()=>u[2]||=[o(`Import`)]),_:1})])]),s(m,{data:e.serverList,style:{width:`100%`},class:`rounded-md shadow-sm`},{default:y(()=>[s(p,{prop:`key`,label:`Key`,width:`150`,align:`center`}),s(p,{prop:`name`,label:`Name`,width:`350`,align:`center`}),s(p,{prop:`count`,label:`Count`,width:`70`,align:`center`}),s(p,{label:`Operation`,width:`120`,align:`center`},{default:y(({row:e})=>[s(d,{type:`icon`,icon:`codicon-edit`,title:`Edit Configuration`,class:`hover:opacity-80`,onClick:t=>r(`selectServer`,e)},null,8,[`onClick`])]),_:1})]),_:1},8,[`data`])])}}}),Y=J;const X={class:`p-3`},Z={class:`mb-3 text-base`},Q={class:`mr-5`};var $=c({__name:`forward`,setup(c){let u=m(``),p=m(null),_=m([]),v=m([]),b=m(!1),x=F(),S=t(()=>x.panel);d(()=>{l.on(`forwardList`,e=>{v.value=e,S.value.loading=!1,S.value.visible=!1}).on(`importResult`,e=>{e.success&&(O(e.message),l.emit(`load`))}).on(`serverList`,e=>{_.value=e}).on(`name`,e=>{u.value=e}).on(`success`,()=>{l.emit(`load`)}).on(`error`,({id:e,message:t})=>{for(let t of v.value)t.id==e&&(t.loading=!1);S.value.loading=!1,D({message:t,type:`error`})}).init()});let C=e=>{u.value=e.name,p.value=e.key,b.value=!1,l.emit(`selectServer`,e.key)},T=e=>{l.emit(`save`,{info:e,serverKey:p.value})},k=()=>{S.value.edit={type:`Local`,autoStartUp:!1,localHost:`127.0.0.1`,remoteHost:`127.0.0.1`},S.value.visible=!0},M=()=>{l.emit(`load`)},N=e=>{switch(e){case I.Running:return`Running`;case I.AlreadyUsed:return`AlreadyUsed`;default:return`Stop`}},P=e=>{e.loading=!0,l.emit(`start`,e.id)},L=e=>{l.emit(`stop`,e)},R=e=>{l.emit(`remove`,{id:e,serverKey:p.value})},z=e=>{S.value.edit={...e},S.value.visible=!0},B=e=>{E(w(`confirm.deleteForward`)).then(()=>{R(e)})};return(t,c)=>{let l=h(`vsc-button`),d=j,p=h(`vsc-switch`),m=A;return f(),a(`div`,X,[b.value?(f(),r(Y,{key:0,serverList:_.value,onSelectServer:C},null,8,[`serverList`])):(f(),a(e,{key:1},[n(`div`,Z,[n(`span`,Q,`Connection: `+g(u.value),1),s(l,{size:`micro`,icon:`codicon-refresh text-base`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},onClick:M}),s(l,{size:`micro`,icon:`codicon-add text-base`,style:{color:`var(--vscode-terminal-ansiCyan)`},onClick:k}),s(l,{size:`micro`,icon:`codicon-arrow-left`,onClick:c[0]||=e=>b.value=!0},{default:y(()=>c[1]||=[o(` Manager `)]),_:1})]),s(m,{data:v.value,style:{width:`100%`}},{default:y(()=>[s(d,{prop:`name`,label:`Name`}),s(d,{prop:`type`,label:`Type`}),s(d,{prop:`localPort`,label:`Local Port`}),s(d,{prop:`remoteHost`,label:`Remote Host`,width:`120`}),s(d,{prop:`remotePort`,label:`Remote Port`,width:`120`}),s(d,{prop:`keepAlive`,label:`KeepAlive`},{default:y(e=>[s(p,{modelValue:e.row.keepAlive,"onUpdate:modelValue":t=>e.row.keepAlive=t,onChange:t=>T(e.row)},null,8,[`modelValue`,`onUpdate:modelValue`,`onChange`])]),_:1}),s(d,{prop:`autoStartUp`,label:`AutoStart`},{default:y(e=>[s(p,{modelValue:e.row.autoStartUp,"onUpdate:modelValue":t=>e.row.autoStartUp=t,onChange:t=>T(e.row)},null,8,[`modelValue`,`onUpdate:modelValue`,`onChange`])]),_:1}),s(d,{prop:`state`,label:`State`},{default:y(e=>[e.row.state==0?(f(),r(l,{key:0,type:`icon`,icon:`el-icon-close text-base text-red`})):e.row.state==1?(f(),r(l,{key:1,type:`icon`,icon:`el-icon-check text-base text-green`})):(f(),r(l,{key:2,type:`icon`,icon:`el-icon-video-pause text-base text-yellow`})),o(` `+g(N(e.row.state)),1)]),_:1}),s(d,{fixed:`right`,width:`200`},{default:y(e=>[e.row.state==1?i(``,!0):(f(),r(l,{key:0,type:`success`,size:`mini`,title:`Start`,loading:e.row.loading,icon:`el-icon-video-play`,style:{color:`var(--vscode-terminal-ansiBrightGreen)`},circle:``,onClick:t=>{P(e.row)}},null,8,[`loading`,`onClick`])),e.row.state==1?(f(),r(l,{key:1,type:`danger`,size:`mini`,title:`Stop`,icon:`el-icon-switch-button`,circle:``,onClick:t=>{L(e.row.id)}},null,8,[`onClick`])):i(``,!0),s(l,{type:`primary`,size:`mini`,title:`Edit`,icon:`el-icon-edit`,style:{color:`var(--vscode-terminal-ansiCyan)`},circle:``,onClick:t=>{z(e.row)}},null,8,[`onClick`]),s(l,{title:`delete`,type:`danger`,size:`mini`,icon:`el-icon-delete`,style:{color:`#f56c6c`},circle:``,onClick:t=>B(e.row.id)},null,8,[`onClick`])]),_:1})]),_:1},8,[`data`])],64)),s(G,{onSave:T})])}}}),ee=$;export{ee as default};