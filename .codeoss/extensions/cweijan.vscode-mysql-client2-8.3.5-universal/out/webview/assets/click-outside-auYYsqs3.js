import{Fragment as e,computed as t,createBaseVNode as n,createBlock as r,createCommentVNode as i,createElementBlock as a,createVNode as o,defineComponent as s,inject as c,isObject as l,nextTick as u,normalizeClass as d,normalizeStyle as f,onBeforeUnmount as p,onMounted as m,onUpdated as h,openBlock as g,provide as _,reactive as v,ref as y,renderSlot as b,resolveDynamicComponent as x,toRef as S,unref as C,watch as w,withCtx as T,withDirectives as E}from"./vscode-ByQLBi_r.js";import{Transition as D,_export_sfc as O,addUnit as k,buildProps as A,debugWarn as j,definePropType as M,isClient as N,isElement as P,isNumber as F,throwError as I,useAriaProps as L,useEventListener as R,useNamespace as z,useResizeObserver as ee,vShow as B,withInstall as V}from"./focus-trap-CSSWZImT.js";const H=4,U={vertical:{offset:`offsetHeight`,scroll:`scrollTop`,scrollSize:`scrollHeight`,size:`height`,key:`vertical`,axis:`Y`,client:`clientY`,direction:`top`},horizontal:{offset:`offsetWidth`,scroll:`scrollLeft`,scrollSize:`scrollWidth`,size:`width`,key:`horizontal`,axis:`X`,client:`clientX`,direction:`left`}},W=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),G=Symbol(`scrollbarContextKey`),K=A({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),q=`Thumb`,J=s({__name:`thumb`,props:K,setup(e){let i=e,a=c(G),o=z(`scrollbar`);a||I(q,`can not inject scrollbar context`);let s=y(),l=y(),u=y({}),m=y(!1),h=!1,_=!1,v=N?document.onselectstart:null,b=t(()=>U[i.vertical?`vertical`:`horizontal`]),x=t(()=>W({size:i.size,move:i.move,bar:b.value})),w=t(()=>s.value[b.value.offset]**2/a.wrapElement[b.value.scrollSize]/i.ratio/l.value[b.value.offset]),O=e=>{var t;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;(t=window.getSelection())==null||t.removeAllRanges(),A(e);let n=e.currentTarget;n&&(u.value[b.value.axis]=n[b.value.offset]-(e[b.value.client]-n.getBoundingClientRect()[b.value.direction]))},k=e=>{if(!l.value||!s.value||!a.wrapElement)return;let t=Math.abs(e.target.getBoundingClientRect()[b.value.direction]-e[b.value.client]),n=l.value[b.value.offset]/2,r=(t-n)*100*w.value/s.value[b.value.offset];a.wrapElement[b.value.scroll]=r*a.wrapElement[b.value.scrollSize]/100},A=e=>{e.stopImmediatePropagation(),h=!0,document.addEventListener(`mousemove`,j),document.addEventListener(`mouseup`,M),v=document.onselectstart,document.onselectstart=()=>!1},j=e=>{if(!s.value||!l.value||h===!1)return;let t=u.value[b.value.axis];if(!t)return;let n=(s.value.getBoundingClientRect()[b.value.direction]-e[b.value.client])*-1,r=l.value[b.value.offset]-t,i=(n-r)*100*w.value/s.value[b.value.offset];a.wrapElement[b.value.scroll]=i*a.wrapElement[b.value.scrollSize]/100},M=()=>{h=!1,u.value[b.value.axis]=0,document.removeEventListener(`mousemove`,j),document.removeEventListener(`mouseup`,M),L(),_&&(m.value=!1)},P=()=>{_=!1,m.value=!!i.size},F=()=>{_=!0,m.value=h};p(()=>{L(),document.removeEventListener(`mouseup`,M)});let L=()=>{document.onselectstart!==v&&(document.onselectstart=v)};return R(S(a,`scrollbarElement`),`mousemove`,P),R(S(a,`scrollbarElement`),`mouseleave`,F),(e,t)=>(g(),r(D,{name:C(o).b(`fade`),persisted:``},{default:T(()=>[E(n(`div`,{ref_key:`instance`,ref:s,class:d([C(o).e(`bar`),C(o).is(C(b).key)]),onMousedown:k},[n(`div`,{ref_key:`thumb`,ref:l,class:d(C(o).e(`thumb`)),style:f(C(x)),onMousedown:O},null,38)],34),[[B,e.always||m.value]])]),_:1},8,[`name`]))}});var Y=O(J,[[`__file`,`thumb.vue`]]);const te=A({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ne=s({__name:`bar`,props:te,setup(t,{expose:n}){let r=t,i=c(G),s=y(0),l=y(0),u=y(``),d=y(``),f=y(1),p=y(1),m=e=>{if(e){let t=e.offsetHeight-H,n=e.offsetWidth-H;l.value=e.scrollTop*100/t*f.value,s.value=e.scrollLeft*100/n*p.value}},h=()=>{let e=i?.wrapElement;if(!e)return;let t=e.offsetHeight-H,n=e.offsetWidth-H,a=t**2/e.scrollHeight,o=n**2/e.scrollWidth,s=Math.max(a,r.minSize),c=Math.max(o,r.minSize);f.value=a/(t-a)/(s/(t-s)),p.value=o/(n-o)/(c/(n-c)),d.value=s+H<t?`${s}px`:``,u.value=c+H<n?`${c}px`:``};return n({handleScroll:m,update:h}),(t,n)=>(g(),a(e,null,[o(Y,{move:s.value,ratio:p.value,size:u.value,always:t.always},null,8,[`move`,`ratio`,`size`,`always`]),o(Y,{move:l.value,ratio:f.value,size:d.value,vertical:``,always:t.always},null,8,[`move`,`ratio`,`size`,`always`])],64))}});var re=O(ne,[[`__file`,`bar.vue`]]);const ie=A({height:{type:[String,Number],default:``},maxHeight:{type:[String,Number],default:``},native:{type:Boolean,default:!1},wrapStyle:{type:M([String,Object,Array]),default:``},wrapClass:{type:[String,Array],default:``},viewClass:{type:[String,Array],default:``},viewStyle:{type:[String,Array,Object],default:``},noresize:Boolean,tag:{type:String,default:`div`},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...L([`ariaLabel`,`ariaOrientation`])}),ae={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(F)},X=`ElScrollbar`,oe=s({name:X}),se=s({...oe,props:ie,emits:ae,setup(e,{expose:o,emit:s}){let c=e,p=z(`scrollbar`),S,E,D=y(),O=y(),A=y(),M=y(),N=t(()=>{let e={};return c.height&&(e.height=k(c.height)),c.maxHeight&&(e.maxHeight=k(c.maxHeight)),[c.wrapStyle,e]}),P=t(()=>[c.wrapClass,p.e(`wrap`),{[p.em(`wrap`,`hidden-default`)]:!c.native}]),I=t(()=>[p.e(`view`),c.viewClass]),L=()=>{var e;O.value&&((e=M.value)==null||e.handleScroll(O.value),s(`scroll`,{scrollTop:O.value.scrollTop,scrollLeft:O.value.scrollLeft}))};function B(e,t){l(e)?O.value.scrollTo(e):F(e)&&F(t)&&O.value.scrollTo(e,t)}let V=e=>{if(!F(e)){j(X,`value must be a number`);return}O.value.scrollTop=e},H=e=>{if(!F(e)){j(X,`value must be a number`);return}O.value.scrollLeft=e},U=()=>{var e;(e=M.value)==null||e.update()};return w(()=>c.noresize,e=>{e?(S?.(),E?.()):({stop:S}=ee(A,U),E=R(`resize`,U))},{immediate:!0}),w(()=>[c.maxHeight,c.height],()=>{c.native||u(()=>{var e;U(),O.value&&((e=M.value)==null||e.handleScroll(O.value))})}),_(G,v({scrollbarElement:D,wrapElement:O})),m(()=>{c.native||u(()=>{U()})}),h(()=>U()),o({wrapRef:O,update:U,scrollTo:B,setScrollTop:V,setScrollLeft:H,handleScroll:L}),(e,t)=>(g(),a(`div`,{ref_key:`scrollbarRef`,ref:D,class:d(C(p).b())},[n(`div`,{ref_key:`wrapRef`,ref:O,class:d(C(P)),style:f(C(N)),onScroll:L},[(g(),r(x(e.tag),{id:e.id,ref_key:`resizeRef`,ref:A,class:d(C(I)),style:f(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:T(()=>[b(e.$slots,`default`)]),_:3},8,[`id`,`class`,`style`,`role`,`aria-label`,`aria-orientation`]))],38),e.native?i(`v-if`,!0):(g(),r(re,{key:0,ref_key:`barRef`,ref:M,always:e.always,"min-size":e.minSize},null,8,[`always`,`min-size`]))],2))}});var ce=O(se,[[`__file`,`scrollbar.vue`]]);const le=V(ce),Z=new Map;let Q;N&&(document.addEventListener(`mousedown`,e=>Q=e),document.addEventListener(`mouseup`,e=>{for(let t of Z.values())for(let{documentHandler:n}of t)n(e,Q)}));function $(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:P(t.arg)&&n.push(t.arg),function(r,i){let a=t.instance.popperRef,o=r.target,s=i?.target,c=!t||!t.instance,l=!o||!s,u=e.contains(o)||e.contains(s),d=e===o,f=n.length&&n.some(e=>e?.contains(o))||n.length&&n.includes(s),p=a&&(a.contains(o)||a.contains(s));c||l||u||d||f||p||t.value(r,i)}}const ue={beforeMount(e,t){Z.has(e)||Z.set(e,[]),Z.get(e).push({documentHandler:$(e,t),bindingFn:t.value})},updated(e,t){Z.has(e)||Z.set(e,[]);let n=Z.get(e),r=n.findIndex(e=>e.bindingFn===t.oldValue),i={documentHandler:$(e,t),bindingFn:t.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(e){Z.delete(e)}};export{ue as ClickOutside,le as ElScrollbar};