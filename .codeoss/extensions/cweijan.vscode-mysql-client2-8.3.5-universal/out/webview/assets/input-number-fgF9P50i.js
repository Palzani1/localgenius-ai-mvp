import{computed as e,createBlock as t,createCommentVNode as n,createElementBlock as r,createVNode as i,defineComponent as a,isString as o,normalizeClass as s,onMounted as c,onUpdated as l,openBlock as u,reactive as ee,ref as te,renderSlot as d,unref as f,watch as p,withCtx as m,withDirectives as h}from"./vscode-ByQLBi_r.js";import{CHANGE_EVENT as g,ElIcon as _,INPUT_EVENT as v,UPDATE_MODEL_EVENT as y,_export_sfc as b,arrow_down_default as ne,arrow_up_default as re,buildProps as x,debugWarn as S,isNil_default as C,isNumber as w,isUndefined as T,minus_default as E,plus_default as ie,throwError as ae,useAriaProps as D,useDeprecated as oe,useFormDisabled as se,useFormItem as ce,useFormSize as le,useLocale as O,useNamespace as ue,useSizeProp as k,withInstall as A,withKeys as j,withModifiers as M}from"./focus-trap-CSSWZImT.js";import{ElInput as N}from"./notify-DqF5XRqJ.js";import{vRepeatClick as P}from"./repeat-click-KTkSX-WL.js";const F=x({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},modelValue:Number,readonly:Boolean,disabled:Boolean,size:k,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:``,values:[``,`right`]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||w(e)||[`min`,`max`].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...D([`ariaLabel`])}),I={[g]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[v]:e=>w(e)||C(e),[y]:e=>w(e)||C(e)},de=[`aria-label`,`onKeydown`],fe=[`aria-label`,`onKeydown`],L=a({name:`ElInputNumber`}),R=a({...L,props:F,emits:I,setup(a,{expose:b,emit:x}){let D=a,{t:k}=O(),A=ue(`input-number`),F=te(),I=ee({currentValue:D.modelValue,userInput:null}),{formItem:L}=ce(),R=e(()=>w(D.modelValue)&&D.modelValue<=D.min),z=e(()=>w(D.modelValue)&&D.modelValue>=D.max),B=e(()=>{let e=K(D.step);return T(D.precision)?Math.max(K(D.modelValue),e):(e>D.precision&&S(`InputNumber`,`precision should not be less than the decimal places of step`),D.precision)}),V=e(()=>D.controls&&D.controlsPosition===`right`),H=le(),U=se(),W=e(()=>{if(I.userInput!==null)return I.userInput;let e=I.currentValue;if(C(e))return``;if(w(e)){if(Number.isNaN(e))return``;T(D.precision)||(e=e.toFixed(D.precision))}return e}),G=(e,t)=>{if(T(t)&&(t=B.value),t===0)return Math.round(e);let n=String(e),r=n.indexOf(`.`);if(r===-1)return e;let i=n.replace(`.`,``).split(``),a=i[r+t];if(!a)return e;let o=n.length;return n.charAt(o-1)===`5`&&(n=`${n.slice(0,Math.max(0,o-1))}6`),Number.parseFloat(Number(n).toFixed(t))},K=e=>{if(C(e))return 0;let t=e.toString(),n=t.indexOf(`.`),r=0;return n!==-1&&(r=t.length-n-1),r},q=(e,t=1)=>w(e)?G(e+D.step*t):I.currentValue,J=()=>{if(D.readonly||U.value||z.value)return;let e=Number(W.value)||0,t=q(e);Z(t),x(v,I.currentValue),$()},Y=()=>{if(D.readonly||U.value||R.value)return;let e=Number(W.value)||0,t=q(e,-1);Z(t),x(v,I.currentValue),$()},X=(e,t)=>{let{max:n,min:r,step:i,precision:a,stepStrictly:s,valueOnClear:c}=D;n<r&&ae(`InputNumber`,`min should not be greater than max.`);let l=Number(e);if(C(e)||Number.isNaN(l))return null;if(e===``){if(c===null)return null;l=o(c)?{min:r,max:n}[c]:c}return s&&(l=G(Math.round(l/i)*i,a)),T(a)||(l=G(l,a)),(l>n||l<r)&&(l=l>n?n:r,t&&x(y,l)),l},Z=(e,t=!0)=>{var n;let r=I.currentValue,i=X(e);if(!t){x(y,i);return}r===i&&e||(I.userInput=null,x(y,i),r!==i&&x(g,i,r),D.validateEvent&&((n=L?.validate)==null||n.call(L,`change`).catch(e=>S(e))),I.currentValue=i)},Q=e=>{I.userInput=e;let t=e===``?null:Number(e);x(v,t),Z(t,!1)},pe=e=>{let t=e===``?``:Number(e);(w(t)&&!Number.isNaN(t)||e===``)&&Z(t),$(),I.userInput=null},me=()=>{var e,t;(t=(e=F.value)?.focus)==null||t.call(e)},he=()=>{var e,t;(t=(e=F.value)?.blur)==null||t.call(e)},ge=e=>{x(`focus`,e)},_e=e=>{var t;I.userInput=null,x(`blur`,e),D.validateEvent&&((t=L?.validate)==null||t.call(L,`blur`).catch(e=>S(e)))},$=()=>{I.currentValue!==D.modelValue&&(I.currentValue=D.modelValue)},ve=e=>{document.activeElement===e.target&&e.preventDefault()};return p(()=>D.modelValue,(e,t)=>{let n=X(e,!0);I.userInput===null&&n!==t&&(I.currentValue=n)},{immediate:!0}),c(()=>{var e;let{min:t,max:n,modelValue:r}=D,i=(e=F.value)?.input;if(i.setAttribute(`role`,`spinbutton`),Number.isFinite(n)?i.setAttribute(`aria-valuemax`,String(n)):i.removeAttribute(`aria-valuemax`),Number.isFinite(t)?i.setAttribute(`aria-valuemin`,String(t)):i.removeAttribute(`aria-valuemin`),i.setAttribute(`aria-valuenow`,I.currentValue||I.currentValue===0?String(I.currentValue):``),i.setAttribute(`aria-disabled`,String(U.value)),!w(r)&&r!=null){let e=Number(r);Number.isNaN(e)&&(e=null),x(y,e)}i.addEventListener(`wheel`,ve,{passive:!1})}),l(()=>{var e,t;let n=(e=F.value)?.input;n?.setAttribute(`aria-valuenow`,`${(t=I.currentValue)??``}`)}),oe({from:`label`,replacement:`aria-label`,version:`2.8.0`,scope:`el-input-number`,ref:`https://element-plus.org/en-US/component/input-number.html`},e(()=>!!D.label)),b({focus:me,blur:he}),(e,a)=>(u(),r(`div`,{class:s([f(A).b(),f(A).m(f(H)),f(A).is(`disabled`,f(U)),f(A).is(`without-controls`,!e.controls),f(A).is(`controls-right`,f(V))]),onDragstart:a[0]||=M(()=>{},[`prevent`])},[e.controls?h((u(),r(`span`,{key:0,role:`button`,"aria-label":f(k)(`el.inputNumber.decrease`),class:s([f(A).e(`decrease`),f(A).is(`disabled`,f(R))]),onKeydown:j(Y,[`enter`])},[d(e.$slots,`decrease-icon`,{},()=>[i(f(_),null,{default:m(()=>[f(V)?(u(),t(f(ne),{key:0})):(u(),t(f(E),{key:1}))]),_:1})])],42,de)),[[f(P),Y]]):n(`v-if`,!0),e.controls?h((u(),r(`span`,{key:1,role:`button`,"aria-label":f(k)(`el.inputNumber.increase`),class:s([f(A).e(`increase`),f(A).is(`disabled`,f(z))]),onKeydown:j(J,[`enter`])},[d(e.$slots,`increase-icon`,{},()=>[i(f(_),null,{default:m(()=>[f(V)?(u(),t(f(re),{key:0})):(u(),t(f(ie),{key:1}))]),_:1})])],42,fe)),[[f(P),J]]):n(`v-if`,!0),i(f(N),{id:e.id,ref_key:`input`,ref:F,type:`number`,step:e.step,"model-value":f(W),placeholder:e.placeholder,readonly:e.readonly,disabled:f(U),size:f(H),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[j(M(J,[`prevent`]),[`up`]),j(M(Y,[`prevent`]),[`down`])],onBlur:_e,onFocus:ge,onInput:Q,onChange:pe},null,8,[`id`,`step`,`model-value`,`placeholder`,`readonly`,`disabled`,`size`,`max`,`min`,`name`,`aria-label`,`onKeydown`])],34))}});var z=b(R,[[`__file`,`input-number.vue`]]);const B=A(z);export{B as ElInputNumber};