import{Fragment as e,computed as t,createBaseVNode as n,createCommentVNode as r,createElementBlock as i,defineComponent as a,getCurrentInstance as o,h as s,nextTick as c,normalizeClass as l,normalizeStyle as u,onMounted as d,openBlock as f,reactive as p,ref as m,renderList as h,toDisplayString as g}from"./vscode-ByQLBi_r.js";import{render as _}from"./focus-trap-CSSWZImT.js";import{__plugin_vue_export_helper_default as v}from"./_plugin-vue_export-helper-C32SG5g-.js";const y=[`onClick`,`onMouseenter`],b={key:0,class:`menu_item_icon`},x={class:`menu_item_label`},S={key:1,class:`menu_item_expand_icon`},C={key:0,class:`menu-item-divider`},w=`left`,T=`right`;var E=a({__name:`Submenu`,props:{items:{type:Array,default:()=>[]},position:{type:Object,default:()=>({x:0,y:0,width:0,height:0})},minWidth:{type:Number,default:200},presetOpenTrend:{type:String,default:T}},setup(a){let v=a,E=null,D=m(null),O=m(!1),k=m(v.presetOpenTrend),A=p({left:0,top:0,zIndex:2,minWidth:150}),j=p({index:null,instance:null}),M=t(()=>v.items.filter(e=>{let t=typeof e.hidden==`function`&&e.hidden();return!e.hidden&&!t})),N=o();d(()=>{for(let e of v.items)if(e.icon){O.value=!0;break}c(()=>{let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=D.value.offsetWidth,r=D.value.offsetHeight;(k.value===w?P:F)(e,t,n),A.top=v.position.y,v.position.y+r>t&&(v.position.height===0?A.top=v.position.y/t>.5?v.position.y-r:v.position.y:A.top=t-r)})});let P=(e,t,n)=>{A.left=v.position.x-n,k.value=w,A.left<0&&(k.value=T,v.position.width===0?A.left=0:A.left=v.position.x+v.position.width)},F=(e,t,n)=>{A.left=v.position.x+v.position.width,k.value=T,A.left+n>e&&(k.value=w,v.position.width===0?A.left=e-n:A.left=v.position.x-n)},I=(e,t,n)=>{if(j.instance){if(j.index===n)return;R()}if(!t.children)return;let r=3,i=-8,a=e.target.getBoundingClientRect(),o=N.type;j.instance=s(o,{items:t.children,position:{x:a.x+r,y:a.y+i,width:a.width-2*r,height:a.height-2*i},minWidth:typeof t.minWidth==`number`?t.minWidth:v.minWidth,presetOpenTrend:k.value}),j.index=n;let c=document.createElement(`div`);_(j.instance,c),E=c.childNodes[0],document.body.appendChild(c.childNodes[0])},L=e=>{!e.disabled&&typeof e.onClick==`function`&&e.onClick()},R=()=>{j.instance&&(document.body.removeChild(E),j.instance=null,j.index=null)};return(t,a)=>(f(),i(`div`,{ref_key:`menu`,ref:D,class:`menu`,style:u({left:A.left+`px`,top:A.top+`px`,minWidth:A.minWidth+`px`}),onContextmenu:a[0]||=e=>e.preventDefault()},[(f(!0),i(e,null,h(M.value,(t,a)=>(f(),i(e,{key:a},[n(`div`,{class:l([`menu_item`,{menu_item__disabled:t.disabled}]),onClick:()=>L(t),onMouseenter:e=>I(e,t,a)},[O.value?(f(),i(`div`,b,[t.icon?(f(),i(`i`,{key:0,class:l(t.icon)},null,2)):r(``,!0)])):r(``,!0),n(`span`,x,g(t.label),1),t.children?(f(),i(`div`,S,`â–¶`)):r(``,!0)],42,y),t.divided?(f(),i(`div`,C)):r(``,!0)],64))),128))],36))}}),D=v(E,[[`__scopeId`,`data-v-e4650c76`]]),O=class{constructor(e){e.event.preventDefault(),e.event.stopPropagation(),this.instance=s(D,{items:e.items,position:{x:e.event.x,y:e.event.y,width:0,height:0},minWidth:e.minWidth});let t=document.createElement(`div`);_(this.instance,t),document.body.appendChild(t.childNodes[0]),this.addListener()}mousewheelListener(e){this.close()}mouseDownListener(e){var t;let n=(t=e.target)==null||(t=t.getAttribute(`class`))==null?void 0:t.includes(`menu_item`);n?e.preventDefault():this.close(e.target)}mouseClickListener(e){var t;let n=(t=e.target)==null||(t=t.getAttribute(`class`))==null?void 0:t.includes(`menu_item`);n&&this.close(e.target)}addListener(){this.mouseClickListenerProxy=e=>this.mouseClickListener(e),this.mouseDownListenerProxy=e=>this.mouseDownListener(e),document.addEventListener(`click`,this.mouseClickListenerProxy),document.addEventListener(`mousedown`,this.mouseDownListenerProxy)}removeListener(){document.removeEventListener(`click`,this.mouseClickListenerProxy),document.removeEventListener(`mousedown`,this.mouseDownListenerProxy)}isDisable(e){let t=2;for(;t--&&e!=null;){var n;if((n=e.getAttribute(`class`))?.includes(`menu_item__disabled`))return!0;e=e.parentElement}}close(e){if(!(e&&this.isDisable(e))){this.removeListener();for(let e of document.querySelectorAll(`.menu`))document.body.removeChild(e)}}};let k=null;function A(){k&&(k.close(),k=null)}function j(e){A(),k=new O(e)}export{A as closeMenu,j as createMenu};