import{computed as e,createBaseVNode as t,createElementBlock as n,createTextVNode as r,createVNode as i,defineComponent as a,handler as o,onMounted as s,onUnmounted as c,openBlock as l,reactive as u,ref as d,resolveComponent as f,toDisplayString as p,withCtx as m}from"./vscode-ByQLBi_r.js";import"./focus-trap-CSSWZImT.js";import{__plugin_vue_export_helper_default as h}from"./_plugin-vue_export-helper-C32SG5g-.js";import"./tooltip-CVpAU6Sv.js";import"./isEqual-CdOvZtUE.js";import"./isArrayLikeObject-05TlFTR_.js";import"./merge-DTOcvLG1.js";import"./_baseIteratee-CSRzNRlS.js";import{ElTable as g,ElTableColumn as _}from"./table-RpKCEj1I.js";import"./isUndefined-Cqoojwy1.js";import"./click-outside-auYYsqs3.js";import"./checkbox-BaDld0em.js";import{ElTag as v}from"./tag-CWpNjs-a.js";const ee={id:`app`,class:`redis-status-container`},y={class:`mt-3 px-3 flex items-center`},b={class:`grid grid-cols-3 gap-4 mt-4 px-3`},x={class:`col-span-1`},S={class:`box-card p-3 bg-secondBg mb-3`},C={class:`server-status-tag-p`},w={class:`server-status-text`},T={class:`server-status-tag-p`},E=[`title`],D={class:`server-status-tag-p`},O={class:`server-status-text`},k={class:`col-span-1`},A={class:`box-card p-3 bg-secondBg mb-3`},j={class:`server-status-tag-p`},M={class:`server-status-text`},N={class:`server-status-tag-p`},P={class:`server-status-text`},F={class:`server-status-tag-p`},I={class:`server-status-text`},L={class:`col-span-1`},R={class:`box-card p-3 bg-secondBg mb-3`},te={class:`server-status-tag-p`},z={class:`server-status-text`},B={class:`server-status-tag-p`},V={class:`server-status-text`},H={class:`server-status-tag-p`},U={class:`server-status-text`},W={class:`mt-4 px-3`},G={class:`box-card p-3 bg-secondBg mb-3`},K={class:`mt-4 px-3`},q={class:`box-card p-3 bg-secondBg mb-3`};var J=a({__name:`redisStatus`,setup(a){let h=d(!1),J=d(null),Y=d(2e3),X=u({}),Z=e(()=>{let e=[];for(let t in X)if(t.startsWith(`db`)){let n=X[t],r=n.split(`,`);e.push({db:t,keys:r[0].split(`=`)[1],expires:r[1].split(`=`)[1],avg_ttl:r[2].split(`=`)[1]})}return e}),Q=e(()=>{let e=[];for(let t in X)e.push({key:t,value:X[t]});return e});s(()=>{$(),o.on(`info`,e=>{ae(e)}),o.emit(`init`)}),c(()=>{clearInterval(J.value)});let $=()=>{J.value=setInterval(()=>{h.value&&o.emit(`init`)},Y.value)},ne=(e,t)=>e.keys-t.keys,re=(e,t)=>e.expires-t.expires,ie=(e,t)=>e.avg_ttl-t.avg_ttl,ae=e=>{if(!e)return{};e=e.split(`
`);let t={};for(let n of e){if(n=n.replace(/\s/gi,``),n.startsWith(`#`)||!n)continue;let e=n.split(`:`);t[e[0]]=e[1]}Object.assign(X,t)};return(e,a)=>{let o=v,s=f(`vsc-switch`),c=f(`vsc-tooltip`),u=_,d=g;return l(),n(`div`,ee,[t(`div`,y,[i(o,{type:`info`,class:`mr-2`},{default:m(()=>a[1]||=[t(`i`,{class:`el-icon-refresh`},null,-1),r(` Auto Refresh `)]),_:1}),i(c,{title:`Auto Refresh Switch, Refresh Every 2 Seconds`},{default:m(()=>[i(s,{modelValue:h.value,"onUpdate:modelValue":a[0]||=e=>h.value=e,onChange:$},null,8,[`modelValue`])]),_:1})]),t(`div`,b,[t(`div`,x,[t(`div`,S,[a[5]||=t(`span`,{class:`text-base mb-2 block`},`Server`,-1),t(`p`,C,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[2]||=r(` Redis Version: `),t(`span`,w,p(X.redis_version),1)]),_:1})]),t(`p`,T,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[3]||=r(` OS: `),t(`span`,{class:`server-status-text`,title:X.os},p(X.os),9,E)]),_:1})]),t(`p`,D,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[4]||=r(` Process ID: `),t(`span`,O,p(X.process_id),1)]),_:1})])])]),t(`div`,k,[t(`div`,A,[a[9]||=t(`span`,{class:`text-base mb-2 block`},` Memory`,-1),t(`p`,j,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[6]||=r(` Used Memory: `),t(`span`,M,p(X.used_memory_human),1)]),_:1})]),t(`p`,N,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[7]||=r(` Used Memory Peak: `),t(`span`,P,p(X.used_memory_peak_human),1)]),_:1})]),t(`p`,F,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[8]||=r(` Used Memory Lua: `),t(`span`,I,p(Math.round(X.used_memory_lua/1024))+`K`,1)]),_:1})])])]),t(`div`,L,[t(`div`,R,[a[13]||=t(`span`,{class:`text-base mb-2 block`},`Stats`,-1),t(`p`,te,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[10]||=r(` Connected Clients: `),t(`span`,z,p(X.connected_clients),1)]),_:1})]),t(`p`,B,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[11]||=r(` Total Connections: `),t(`span`,V,p(X.total_connections_received),1)]),_:1})]),t(`p`,H,[i(o,{class:`server-status-container`,type:`info`},{default:m(()=>[a[12]||=r(` Total Commands: `),t(`span`,U,p(X.total_commands_processed),1)]),_:1})])])])]),t(`div`,W,[t(`div`,G,[a[14]||=t(`span`,{class:`text-base mb-2 block`},`Key Statistics`,-1),i(d,{data:Z.value},{default:m(()=>[i(u,{prop:`db`,label:`DB`}),i(u,{sortable:``,prop:`keys`,label:`Keys`,"sort-method":ne}),i(u,{sortable:``,prop:`expires`,label:`Expires`,"sort-method":re}),i(u,{sortable:``,prop:`avg_ttl`,label:`Avg TTL`,"sort-method":ie})]),_:1},8,[`data`])])]),t(`div`,K,[t(`div`,q,[a[15]||=t(`span`,{class:`text-base mb-2 block`},` All Redis Info`,-1),i(d,{data:Q.value},{default:m(()=>[i(u,{prop:`key`,label:`Key`}),i(u,{prop:`value`,label:`Value`})]),_:1},8,[`data`])])])])}}}),Y=h(J,[[`__scopeId`,`data-v-122fec95`]]);export{Y as default};